(this["webpackJsonphw-03-image-finder"]=this["webpackJsonphw-03-image-finder"]||[]).push([[0],{19:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(7),o=n.n(a),s=(n(19),n(11)),i=n(6),u=n.n(i),l=n(10),h=n(4),f=n(3),j=n(12),b=n.n(j),m=n(1),d=function(e){var t=e.value,n=e.openModal;return Object(m.jsx)(m.Fragment,{children:t.map((function(e){return Object(m.jsx)("li",{className:"ImageGalleryItem",onClick:function(){return n(e.largeImageURL,e.tags)},children:Object(m.jsx)("img",{src:e.webformatURL,alt:e.tags,className:"ImageGalleryItem-image"})},e.id)}))})},g=function(e){var t=e.value,n=e.openModal;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("ul",{className:"ImageGallery",children:Object(m.jsx)(d,{value:t,openModal:n})})})},p=function(e){var t=e.onSubmit,n=Object(r.useState)(""),c=Object(h.a)(n,2),a=c[0],o=c[1];return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("header",{className:"Searchbar",children:Object(m.jsxs)("form",{className:"SearchForm",onSubmit:function(e){if(e.preventDefault(),!a)return f.c.error("not correct input");t(a),o("")},children:[Object(m.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(m.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(m.jsx)("input",{className:"SearchForm-input",type:"text",value:a,autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:function(e){var t=e.target.value;o(t)}})]})})})},O=function(e){var t=e.onClick;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("button",{className:"Button",type:"button",onClick:t,children:"Load more"})})},v=n(13),x=n(14),y=function(){function e(){Object(v.a)(this,e),this.searchQuery="",this.page=1}return Object(x.a)(e,[{key:"fetchImage",value:function(){var e=this,t="https://pixabay.com/api/?q=".concat(this.searchQuery,"&page=").concat(this.page,"&key=").concat("21492726-451e87d3f3afe144072272f85","&image_type=photo&orientation=horizontal&per_page=15");return fetch(t).then((function(e){return e.json()})).then((function(t){var n=t.hits;return e.incrementPage(),n})).catch((function(e){return console.log("error",e)}))}},{key:"query",get:function(){return this.searchQuery},set:function(e){this.searchQuery=e}},{key:"incrementPage",value:function(){this.page+=1}},{key:"resetPage",value:function(){this.page=1}}]),e}(),w=document.querySelector("#modal-root"),k=function(e){var t=e.closeModal,n=e.children;Object(r.useEffect)((function(){return window.addEventListener("keydown",c),function(){window.removeEventListener("keydown",c)}}));var c=function(e){if("Escape"===e.code)return t()};return Object(a.createPortal)(Object(m.jsx)("div",{className:"Overlay",onClick:function(e){if(e.target===e.currentTarget)return t()},children:Object(m.jsx)("div",{className:"Modal",children:n})}),w)},S=new y;function F(){var e=Object(r.useState)([]),t=Object(h.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),o=Object(h.a)(a,2),i=o[0],j=o[1],d=Object(r.useState)(null),v=Object(h.a)(d,2),x=v[0],y=v[1],w=Object(r.useState)(null),F=Object(h.a)(w,2),M=F[0],C=F[1],E=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return S.query=t,S.resetPage(),j(!0),c([]),e.next=8,S.fetchImage().finally((function(){return j(!1)}));case 8:0!==(n=e.sent).length&&f.b.success("success"),0===n.length&&f.b.error("nothing found"),c(n);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,S.fetchImage().finally((function(){return j(!1)}));case 3:0!==(t=e.sent).length&&f.b.success("success"),0===t.length&&f.b.error("nothing more was found"),c((function(e){return[].concat(Object(s.a)(e),Object(s.a)(t))})),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(p,{onSubmit:E}),i&&Object(m.jsx)(b.a,{className:"Overlay",style:N,type:"BallTriangle",color:"#00BFFF",height:200,width:200}),Object(m.jsx)(g,{value:n,openModal:function(e,t){C(e),y(t)}}),0!==n.length&&Object(m.jsx)(O,{onClick:L}),M&&Object(m.jsx)(k,{closeModal:function(){C(null)},children:Object(m.jsx)("img",{src:M,alt:x})}),Object(m.jsx)(f.a,{position:"top-right",toastOptions:I})]})}var N={position:"fixed",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},I={success:{style:{color:"#fff",background:"green"}},error:{style:{color:"#fff",background:"red"}}};o.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(F,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.a69084d9.chunk.js.map